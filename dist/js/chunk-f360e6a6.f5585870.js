(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f360e6a6"],{"0421":function(t,e,s){},"0d5d":function(t,e,s){},"198d":function(t,e,s){"use strict";var a=s("ae80"),n=s.n(a);n.a},"1da4":function(t,e,s){},"45ac":function(t,e,s){"use strict";var a=s("7e4d"),n=s.n(a);n.a},"4dee":function(t,e,s){"use strict";var a=s("1da4"),n=s.n(a);n.a},7941:function(t,e,s){"use strict";var a=s("0d5d"),n=s.n(a);n.a},"7a45":function(t,e,s){},"7e4d":function(t,e,s){},"90d6":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b-constructor"},[0===t.selected_attachments.length?s("div",{staticClass:"b-loader-app",attrs:{"data-preloader":""}},[s("div",{staticClass:"b-loader-app__circle"}),s("div",{staticClass:"b-loader-app__circle"}),s("div",{staticClass:"b-loader-app__circle"}),s("div",{staticClass:"b-loader-app__circle"}),s("div",{staticClass:"b-loader-app__circle"}),s("div",{staticClass:"b-loader-app__circle"}),s("div",{staticClass:"b-loader-app__circle"}),s("div",{staticClass:"b-loader-app__circle"}),s("div",{staticClass:"b-loader-app__circle"}),s("div",{staticClass:"b-loader-app__circle"}),s("div",{staticClass:"b-loader-app__circle"}),s("div",{staticClass:"b-loader-app__circle"}),s("div",{staticClass:"b-loader-app__circle"}),s("div",{staticClass:"b-loader-app__circle"}),s("div",{staticClass:"b-loader-app__circle"}),s("div",{staticClass:"b-loader-app__circle"})]):t._e(),0!=t.selected_attachments.length?s("div",{staticClass:"b-constructor__inner"},[s("div",{staticClass:"b-title b-title_light b-title_fz-norm b-title_center b-title_fw-400 b-constructor__title"},[s("span",[t._v(t._s(t.kit_or_base_data.name))])]),s("Constructor",{attrs:{side:t.side,step:t.step,skeleton_data:t.current_skeleton_data,skeleton_points_data:t.current_skeleton_points,selected_attachments:t.selected_attachments,selected_attachments_classes:t.selected_attachments_classes,darken_parts:t.darken_parts},on:{select_point:t.on_select_point,drop_classes_list:t.on_drop_classes_list}}),s("AttachmentsCardsList",{attrs:{step:t.step,side:t.side,selected_attachments:t.selected_attachments,suitable_attachments_classes:t.suitable_attachments_classes,suitable_attachments:t.suitable_attachments,selected_point:t.selected_point,price:t.price,weight:t.weight},on:{select_class:t.on_select_class,select_attachment:t.on_select_attachment,delete_attachment:t.on_delete_attachment,step_minus:t.on_step_minus,flip_side:t.flip_side,darken_parts:t.on_darken_parts,add_to_card:t.add_to_card}})],1):t._e()])},n=[],i=(s("4de4"),s("4160"),s("caad"),s("d81d"),s("a434"),s("b0c0"),s("b64b"),s("2532"),s("159b"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b-construcor-app"},[s("div",{staticClass:"b-construcor-app__inner"},[s("div",{staticClass:"b-construcor-app__header"},[s("div",{staticClass:"b-construcor-app__header-row"},[s("div",{staticClass:"b-construcor-app__title"},[t._v(" "+t._s(t.texts.title)+" ")]),s("div",{staticClass:"b-construcor-app__checkboxes"},[s("div",{staticClass:"b-radiobutton b-radiobutton_rect"},[s("input",{staticClass:"b-radiobutton__input",attrs:{name:"name",type:"checkbox",id:"c1res"}}),s("label",{staticClass:"b-radiobutton__label",attrs:{for:"c1res"}},[s("div",{staticClass:"b-radiobutton__circle"}),t._v(" "+t._s(t.texts.show_with_adapters)+" ")]),s("div",{staticClass:"b-popup b-radiobutton__popup"},[s("div",{staticClass:"b-popup__trigger"},[t._v("?")]),s("div",{staticClass:"b-popup__content"},[t._v(" "+t._s(t.texts.popup_1)+" ")])])])]),s("div",{staticClass:"b-construcor-app__checkboxes"},[s("div",{staticClass:"b-radiobutton b-radiobutton_rect"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.darkened_parts,expression:"darkened_parts"}],staticClass:"b-radiobutton__input",attrs:{name:"name2",type:"checkbox",id:"c1res2"},domProps:{checked:Array.isArray(t.darkened_parts)?t._i(t.darkened_parts,null)>-1:t.darkened_parts},on:{change:[function(e){var s=t.darkened_parts,a=e.target,n=!!a.checked;if(Array.isArray(s)){var i=null,r=t._i(s,i);a.checked?r<0&&(t.darkened_parts=s.concat([i])):r>-1&&(t.darkened_parts=s.slice(0,r).concat(s.slice(r+1)))}else t.darkened_parts=n},t.darken_parts]}}),s("label",{staticClass:"b-radiobutton__label",attrs:{for:"c1res2"}},[s("div",{staticClass:"b-radiobutton__circle"}),t._v(" "+t._s(t.texts.darken_standart_parts)+" ")]),s("div",{staticClass:"b-popup b-radiobutton__popup"},[s("div",{staticClass:"b-popup__trigger"},[t._v("?")]),s("div",{staticClass:"b-popup__content"},[t._v(" "+t._s(t.texts.popup_2)+" ")])])])]),s("div",{staticClass:"b-construcor-app__nav"},[1!=t.step?s("button",{staticClass:"b-button b-button_black b-button_m0 b-construcor-app__button",on:{click:t.step_minus}},[t._v(" BACK "),s("span",{staticClass:"pe-7s-left-arrow"})]):t._e(),3===t.step?s("input",{directives:[{name:"model",rawName:"v-model",value:t.attachment_filter,expression:"attachment_filter"}],staticClass:"b-construcor-app__filter",attrs:{type:"text",placeholder:"Find by name..."},domProps:{value:t.attachment_filter},on:{input:[function(e){e.target.composing||(t.attachment_filter=e.target.value)},t.m_attachment_filter]}}):t._e(),s("button",{staticClass:"b-button b-button_black b-construcor-app__button",on:{click:t.flip_side}},[t._v(" FLIP GUN "),s("span",{staticClass:"pe-7s-repeat"})])])])]),s("div",{staticClass:"b-construcor-app__main"},[1===t.step?s("div",{staticClass:"b-construcor-app__main-row"},t._l(t.current_side_selected_attachments,(function(e,a){return s("SelectedAttachmentCard",{key:"step-1-"+a,attrs:{item:e,side:t.side}})})),1):t._e(),2===t.step?s("div",{staticClass:"b-construcor-app__main-row"},t._l(t.suitable_attachments_classes,(function(e,a){return s("ClassCard",{key:"step-2-"+a,attrs:{item:e,side:t.side},on:{select_class:t.on_select_class}})})),1):t._e(),3===t.step?s("div",{staticClass:"b-construcor-app__main-row"},[t._l(t.current_side_suitable_attachments,(function(e,a){return s("AttachmentCard",{key:"step-3-"+a,attrs:{item:e,side:t.side,current_side_selected_attachments:t.current_side_selected_attachments},on:{select_attachment:t.on_select_attachment,delete_attachment:t.on_delete_attachment}})})),0===t.current_side_suitable_attachments.length?s("h4",{staticStyle:{color:"#e33939"}},[t._v(" Sorry, no matching accessories found. ")]):t._e()],2):t._e()]),s("div",{staticClass:"b-construcor-app__footer"},[s("div",{staticClass:"b-construcor-app__footer-row"},[s("div",{staticClass:"b-construcor-app__footer-data-text"},[t._v(" "+t._s(t.texts.total_price)+" "),s("strong",[t._v(t._s(t.price)+"$")])]),s("div",{staticClass:"b-construcor-app__footer-data-text"},[t._v(" "+t._s(t.texts.weight)+" "),s("strong",[t._v(t._s(t.weight)+"g")])]),s("div",{staticClass:"b-construcor-app__footer-share"},[s("i",{staticClass:"pe-7s-share",staticStyle:{color:"#e33939"}}),s("span",[t._v(t._s(t.texts.share))])]),s("button",{staticClass:"b-button b-button_border b-construcor-app__button"},[t._v(" "+t._s(t.texts.button.save)+" ")]),s("button",{staticClass:"b-button b-construcor-app__button",on:{click:t.add_to_card}},[t._v(" "+t._s(t.texts.button.add)+" ")])])])])])}),r=[],c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b-attachment-card b-construcor-app__main-card"},[s("div",{staticClass:"b-attachment-card__left"},[s("div",{staticClass:"b-attachment-card__buttons"},[t.selected_current_item?t._e():s("div",{staticClass:"b-attachment-card__button b-attachment-card__button_plus",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.select_attachment(e)}}},[s("span",{staticClass:"pe-7s-plus"})]),t.selected_current_item?s("div",{staticClass:"b-attachment-card__button b-attachment-card__button_minus",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.delete_attachment(e)}}},[s("span",{staticClass:"pe-7s-less"})]):t._e()]),s("img",{staticClass:"b-attachment-card__image",attrs:{src:t.item.image[t.side]}}),s("div",{staticClass:"b-attachment-card__trigger"})]),s("div",{staticClass:"b-attachment-card__right"},[s("div",{staticClass:"b-attachment-card__header"},[s("div",{staticClass:"b-attachment-card__name"},[t._v(" "+t._s(t.item.attachment.name)+" ")])]),s("div",{staticClass:"b-attachment-card__footer"},[s("div",{staticClass:"b-attachment-card__price"},[t._v(" "+t._s(t.item.price?t.item.price+"$":"0$ (default)")+" ")]),t._m(0)])])])},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b-attachment-card__link"},[s("div",{staticClass:"b-popup"},[s("div",{staticClass:"b-popup__trigger"},[t._v(" ? ")])])])}],_={props:["item","side","current_side_selected_attachments"],data:function(){return{}},methods:{select_attachment:function(){this.$emit("select_attachment",this.item)},delete_attachment:function(){this.$emit("delete_attachment",this.item)}},computed:{selected_current_item:function(){var t=this,e=!1;return this.current_side_selected_attachments.forEach((function(s){parseInt(t.item.attachment.id)===parseInt(s.attachment.id)&&parseInt(t.item.attachment.point_id)===parseInt(s.attachment.point_id)&&parseInt(t.item.parent.point_id)===parseInt(s.parent.point_id)&&(e=!0)})),e}}},p=_,d=(s("4dee"),s("2877")),l=Object(d["a"])(p,c,o,!1,null,null,null),u=l.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b-attachment-card b-construcor-app__main-card",staticStyle:{cursor:"default"}},[s("div",{staticClass:"b-attachment-card__left"},[s("img",{staticClass:"b-attachment-card__image",attrs:{src:t.item.image[t.side],draggable:"false"}}),s("div",{staticClass:"b-attachment-card__trigger"})]),s("div",{staticClass:"b-attachment-card__right"},[s("div",{staticClass:"b-attachment-card__header"},[s("div",{staticClass:"b-attachment-card__name"},[t._v(" "+t._s(t.item.attachment.name)+" ")])]),s("div",{staticClass:"b-attachment-card__footer"},[s("div",{staticClass:"b-attachment-card__price"},[t._v(" "+t._s(t.item.price?t.item.price+"$":"0$ (default)")+" ")]),t.item.price?s("div",{staticClass:"b-attachment-card__link"},[t._m(0)]):t._e()])])])},m=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b-popup"},[s("div",{staticClass:"b-popup__trigger"},[t._v(" ? ")])])}],f={props:["item","side"],data:function(){return{}},methods:{}},b=f,v=(s("c19f"),Object(d["a"])(b,h,m,!1,null,null,null)),k=v.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b-attachment-card b-construcor-app__main-card",on:{click:t.select_class}},[s("div",{staticClass:"b-attachment-card__left"},[s("img",{staticClass:"b-attachment-card__image",attrs:{src:t.item.image[t.side]}}),s("div",{staticClass:"b-attachment-card__trigger"})]),s("div",{staticClass:"b-attachment-card__right"},[s("div",{staticClass:"b-attachment-card__header"},[s("div",{staticClass:"b-attachment-card__name"},[t._v(t._s(t.item.name))])])])])},g=[],C={props:["item","side"],data:function(){return{}},methods:{select_class:function(){this.$emit("select_class",parseInt(this.item.class))}}},I=C,x=(s("d923"),Object(d["a"])(I,y,g,!1,null,null,null)),w=x.exports,$={props:["selected_attachments","side","step","suitable_attachments_classes","suitable_attachments","selected_point","price","weight"],components:{AttachmentCard:u,SelectedAttachmentCard:k,ClassCard:w},watch:{step:{deep:!0,handler:function(){this.attachment_filter=""}}},data:function(){return{texts:{title:"Choose point",show_with_adapters:"Show with adapters",popup_1:"When the “With adapters” checkbox is activated, the entire tuning will be shown in the list of accessories, which can be installed at this point using adapter adapters. Adapters will install automatically. You can choose other adapters to your taste by clicking on the corresponding point on the weapon or accessory.",darken_standart_parts:"Darken the standard parts",popup_2:"The native parts of the weapon will be hidden so that it is more convenient for you to customize your weapon.",total_price:"Total price:",weight:"Weight:",share:"Share",button:{save:"Save to later",add:"Add to card"}},class:null,current_side_suitable_attachments:[],attachment_filter:"",darkened_parts:!1}},methods:{on_select_class:function(t){this.class=t,this.$emit("select_class",t),this.m_current_side_suitable_attachments(t)},m_current_side_suitable_attachments:function(t){var e=this,s=this.suitable_attachments[t].filter((function(t){return t.side===e.side}));s.forEach((function(t){t.parent={type:e.selected_point.type,point_id:parseInt(e.selected_point.point_id),class:e.selected_point.class}})),this.current_side_suitable_attachments=s},m_attachment_filter:function(){var t=this,e=this.suitable_attachments[this.class].filter((function(e){return e.side===t.side&&e.attachment.name.toLowerCase().includes(t.attachment_filter.toLowerCase())}));e.forEach((function(e){e.parent={type:t.selected_point.type,point_id:parseInt(t.selected_point.point_id),class:t.selected_point.class}})),this.current_side_suitable_attachments=e},on_select_attachment:function(t){this.$emit("select_attachment",t)},on_delete_attachment:function(t){this.$emit("delete_attachment",t)},step_minus:function(){this.$emit("step_minus")},flip_side:function(){this.$emit("flip_side")},darken_parts:function(){this.$emit("darken_parts",this.darkened_parts)},add_to_card:function(){this.$emit("add_to_card")}},computed:{current_side_selected_attachments:function(){var t=this;return this.selected_attachments.filter((function(e){return e.side===t.side}))}}},F=$,E=(s("7941"),Object(d["a"])(F,i,r,!1,null,null,null)),A=E.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b-constructor__preview",style:t.style_padding,on:{click:t.drop_select_point}},[s("div",{staticClass:"b-constructor__preview-inner",style:{transform:"scale("+t.scale+") translate3d("+t.translate+")"}},[s("img",{staticClass:"b-constructor__preview-main-image",style:{opacity:t.opacity},attrs:{src:t.skeleton_data["image_"+t.side],draggable:"false"}}),t._l(t.current_side_selected_attachments,(function(e){return s("PreviewImage",{key:"card-"+e.side+"-image-"+e.attachment.type+"-"+e.attachment.id,attrs:{item:e,side:t.side,radio:t.radio,skeleton_points_data:t.skeleton_points_data,selected_point_id:t.selected_point_id,darken_parts:t.darken_parts}})})),t._l(t.current_side_selected_attachments_classes,(function(e){return s("Point",{key:e.id,attrs:{item:e,radio:t.radio[t.side],skeleton_points_data:t.skeleton_points_data},on:{select_point:t.on_select_point}})}))],2)])},j=[],O=(s("99af"),s("96cf"),s("1da1")),S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b-constructor__point",style:{left:t.parent_pos.x*t.radio+"px",top:t.parent_pos.y*t.radio+"px"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),e.target!==e.currentTarget?null:t.select_point(e)}}})},T=[],z={props:["item","radio","skeleton_points_data"],methods:{select_point:function(t){this.$emit("select_point",{selected_point:this.item,event:t})},parent_point_pos:function(t,e){var s=[];return"part"===e?s=this.all_parts_points.filter((function(e){return parseInt(e.part_id)===parseInt(t.part_id)&&t.side===e.side&&e.type!=t.type}))[0]:"product"===e&&(s=this.all_products_points.filter((function(e){return parseInt(e.product_id)===parseInt(t.product_id)&&t.side===e.side&&e.type!=t.type}))[0]),{x:this.skeleton_points_data.filter((function(t){return s.class.includes(t.class[0])&&t.side===s.side}))[0].pos_x-s.pos_x,y:this.skeleton_points_data.filter((function(t){return s.class.includes(t.class[0])&&t.side===s.side}))[0].pos_y-s.pos_y}}},computed:{all_parts_points:function(){return this.$store.getters.all_parts_points},all_products_points:function(){return this.$store.getters.all_products_points},parent_pos:function(){var t=this,e={x:null,y:null};if("skeleton"===this.item.type){var s=this.skeleton_points_data.filter((function(e){return parseInt(e.id)===parseInt(t.item.point_id)}))[0];s&&(e.x=parseFloat(s.pos_x),e.y=parseFloat(s.pos_y))}else if("part"===this.item.type){var a=this.all_parts_points.filter((function(e){return parseInt(e.id)===parseInt(t.item.point_id)}))[0];a&&(e.x=parseFloat(this.parent_point_pos(a,"part").x)+parseFloat(a.pos_x),e.y=parseFloat(this.parent_point_pos(a,"part").y)+parseFloat(a.pos_y))}else if("product"===this.item.type){var n=this.all_products_points.filter((function(e){return parseInt(e.id)===parseInt(t.item.point_id)}))[0];n&&(e.x=parseFloat(this.parent_point_pos(n,"product").x)+parseFloat(n.pos_x),e.y=parseFloat(this.parent_point_pos(n,"product").y)+parseFloat(n.pos_y))}return e}}},L=z,W=(s("9663"),Object(d["a"])(L,S,T,!1,null,null,null)),R=W.exports,D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"b-constructor__preview-image-box",style:{left:parseFloat(t.parent_pos.x*t.radio[t.side])+"px",top:parseFloat(t.parent_pos.y*t.radio[t.side])+"px",zIndex:t.item.z_index,opacity:t.opacity_style}},[s("img",{staticClass:"b-constructor__preview-image",style:{left:"-"+parseFloat(t.current_pos.x)*t.radio[t.side]+"px",top:"-"+parseFloat(t.current_pos.y)*t.radio[t.side]+"px",width:t.width[t.side]*t.radio[t.side]+"px",filter:t.dark_style},attrs:{draggable:"false",src:t.item.image[t.side]}})])},N=[],q={props:["item","side","radio","skeleton_points_data","selected_point_id","darken_parts"],watch:{},data:function(){return{width:{front:null,back:null}}},created:function(){this.get_width(this.item.image.front,"front"),this.get_width(this.item.image.back,"back")},methods:{get_width:function(t,e){var s=this;return Object(O["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=new Image,i=function(t){s.width[e]=t.currentTarget.width},a.next=4,i;case 4:n.onload=a.sent,n.src=t;case 6:case"end":return a.stop()}}),a)})))()},parent_point_pos:function(t,e){var s=[];return"part"===e?s=this.all_parts_points.filter((function(e){return parseInt(e.part_id)===parseInt(t.part_id)&&t.side===e.side&&e.type!=t.type}))[0]:"product"===e&&(s=this.all_products_points.filter((function(e){return parseInt(e.product_id)===parseInt(t.product_id)&&t.side===e.side&&e.type!=t.type}))[0]),{x:this.skeleton_points_data.filter((function(t){return s.class.includes(t.class[0])&&t.side===s.side}))[0].pos_x-s.pos_x,y:this.skeleton_points_data.filter((function(t){return s.class.includes(t.class[0])&&t.side===s.side}))[0].pos_y-s.pos_y}}},computed:{all_parts_points:function(){return this.$store.getters.all_parts_points},all_products_points:function(){return this.$store.getters.all_products_points},parent_pos:function(){var t=this,e={x:null,y:null};if("skeleton"===this.item.parent.type){var s=this.skeleton_points_data.filter((function(e){return parseInt(e.id)===parseInt(t.item.parent.point_id)}))[0];s&&(e.x=parseFloat(s.pos_x),e.y=parseFloat(s.pos_y))}else if("part"===this.item.parent.type){var a=this.all_parts_points.filter((function(e){return parseInt(e.id)===parseInt(t.item.parent.point_id)}))[0];a&&(e.x=parseFloat(this.parent_point_pos(a,"part").x)+parseFloat(a.pos_x),e.y=parseFloat(this.parent_point_pos(a,"part").y)+parseFloat(a.pos_y))}else if("product"===this.item.parent.type){var n=this.all_products_points.filter((function(e){return parseInt(e.id)===parseInt(t.item.parent.point_id)}))[0];n&&(e.x=parseFloat(this.parent_point_pos(n,"product").x)+parseFloat(n.pos_x),e.y=parseFloat(this.parent_point_pos(n,"product").y)+parseFloat(n.pos_y))}return e},current_pos:function(){var t=this,e={};return"part"===this.item.attachment.type?e=this.all_parts_points.filter((function(e){return parseInt(e.id)===parseInt(t.item.attachment.point_id)}))[0]:"product"===this.item.attachment.type&&(e=this.all_products_points.filter((function(e){return parseInt(e.id)===parseInt(t.item.attachment.point_id)}))[0]),{x:e?parseFloat(e.pos_x):null,y:e?parseFloat(e.pos_y):null}},opacity_style:function(){var t=1;return t=this.selected_point_id?parseInt(this.item.parent.point_id)===parseInt(this.selected_point_id)?1:.35:1,t},dark_style:function(){var t="";return"part"===this.item.attachment.type&&this.darken_parts&&(t="brightness(0.35) blur(1px)"),t}}},J=q,M=(s("198d"),Object(d["a"])(J,D,N,!1,null,null,null)),B=M.exports,G={components:{Point:R,PreviewImage:B},props:["skeleton_data","side","step","skeleton_points_data","selected_attachments","selected_attachments_classes","darken_parts"],watch:{side:{deep:!0,immediate:!0,handler:function(){this.drop_select_point()}},step:{deep:!0,immediate:!0,handler:function(t,e){t<e&&1===t&&(this.selected_point_id=null,this.opacity=1,this.scale=1,this.translate="0, 0, 0")}}},data:function(){return{radio:{front:null,back:null},selected_point_id:null,opacity:1,scale:1,translate:"0, 0, 0"}},created:function(){var t=this,e=setInterval((function(){t.get_radio(t.skeleton_data.image_front,"front"),t.get_radio(t.skeleton_data.image_back,"back"),null!=t.radio.front&&null!=t.radio.back&&clearInterval(e)}),100);window.addEventListener("resize",(function(){t.get_radio(t.skeleton_data.image_front,"front"),t.get_radio(t.skeleton_data.image_back,"back")}))},methods:{get_radio:function(t,e){var s=this;return Object(O["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=new Image,i=function(t){var a=document.querySelector(".b-constructor__preview-main-image"),n=a.width;s.radio[e]=n/t.currentTarget.width},a.next=4,i;case 4:n.onload=a.sent,n.src=t;case 6:case"end":return a.stop()}}),a)})))()},on_select_point:function(t){var e=t.selected_point,s=t.event;this.selected_point_id=parseInt(e.point_id),this.$emit("select_point",e),this.opacity=.35,this.scale=1.25;var a=document.querySelector(".b-constructor__preview-inner"),n={x:a.clientWidth/2,y:a.clientHeight/2},i={x:n.x-parseInt(s.currentTarget.style.left),y:n.y-parseInt(s.currentTarget.style.top)};"front"===this.side?this.translate="".concat(i.x-window.innerWidth/100*7.5,"px, ").concat(i.y,"px, 0"):"back"===this.side&&(this.translate="".concat(i.x+window.innerWidth/100*7.5,"px, ").concat(i.y,"px, 0"))},drop_select_point:function(){this.selected_point_id=null,this.$emit("drop_classes_list"),this.opacity=1,this.scale=1,this.translate="0, 0, 0"}},computed:{style_padding:function(){return"front"===this.side?{paddingLeft:"15vw"}:"back"===this.side?{paddingRight:"15vw"}:""},current_side_points:function(){var t=this;return this.skeleton_points_data.filter((function(e){return e.side===t.side}))},current_side_selected_attachments:function(){var t=this;return this.selected_attachments.filter((function(e){return e.side===t.side}))},current_side_selected_attachments_classes:function(){var t=this;return this.selected_attachments_classes.filter((function(e){return e.side===t.side}))}}},H=G,K=(s("45ac"),Object(d["a"])(H,P,j,!1,null,null,null)),U=K.exports,Y={components:{AttachmentsCardsList:A,Constructor:U},data:function(){return{side:"front",selected_attachments:[],step:1,selected_point:[],suitable_attachments:{},current_class:null,darken_parts:!1}},created:function(){var t=this,e=setInterval((function(){t.kit_or_base_data.skeleton_id&&(t.$store.dispatch("skeleton_points",parseInt(t.kit_or_base_data.skeleton_id)),"kit"===t.kit_or_base_data.type?t.$store.dispatch("kit_data",parseInt(t.kit_or_base_data.id)):"base"===t.kit_or_base_data.type&&t.$store.dispatch("base_data",parseInt(t.kit_or_base_data.id)),clearInterval(e))}),100);this.update_suitable_attachments()},watch:{base_data:{deep:!0,handler:function(){var t=this;"base"===this.kit_or_base_data.type&&setTimeout((function(){t.selected_attachments_push_default()}),1e3)}},kit_data:{deep:!0,handler:function(){var t=this;"kit"===this.kit_or_base_data.type&&setTimeout((function(){t.selected_attachments_push_default()}),1e3)}}},destroyed:function(){this.$store.dispatch("drop_kit_data"),this.$store.dispatch("drop_base_data")},mounted:function(){},methods:{on_step_minus:function(){return 3===this.step?void(this.step=2):2===this.step?void(this.step=1):void 0},flip_side:function(){"front"===this.side?this.side="back":"back"===this.side?this.side="front":console.error("There was an error in choosing a side!!! Current side: ".concat(this.side))},selected_attachments_push_default:function(){var t=this,e=[];if("kit"===this.kit_or_base_data.type)for(var s=function(s){var a=t.all_products.filter((function(e){return parseInt(e.id)===parseInt(t.kit_data[s].product_id)}))[0],n=t.all_products_points.filter((function(e){return parseInt(e.id)===parseInt(t.kit_data[s].product_point_id)}))[0],i={z_index:t.kit_data[s].parent_skeleton_point_id?1:t.kit_data[s].parent_product_point_id?2:1,parent:{type:t.kit_data[s].parent_skeleton_point_id?"skeleton":t.kit_data[s].parent_product_point_id?"product":"",point_id:t.kit_data[s].parent_skeleton_point_id||t.kit_data[s].parent_product_point_id},attachment:{type:"product",id:t.kit_data[s].product_id,point_id:t.kit_data[s].product_point_id,name:a.name,class:n.class},image:{front:a.image_front,back:a.image_back},price:a.price,side:n.side,show:!0};e.push(i)},a=0;a<this.kit_data.length;a++)s(a);else if("base"===this.kit_or_base_data.type)for(var n=function(s){var a=t.all_parts.filter((function(e){return parseInt(e.id)===parseInt(t.base_data[s].part_id)}))[0],n=t.all_parts_points.filter((function(e){return parseInt(e.id)===parseInt(t.base_data[s].part_point_id)}))[0],i={z_index:t.base_data[s].skeleton_point_id?1:t.base_data[s].parent_part_point_id?2:1,parent:{type:t.base_data[s].skeleton_point_id?"skeleton":t.base_data[s].parent_part_point_id?"part":"",point_id:t.base_data[s].skeleton_point_id||t.base_data[s].parent_part_point_id},attachment:{type:"part",id:t.base_data[s].part_id,point_id:t.base_data[s].part_point_id,name:a.name,class:n.class},image:{front:a.image_front,back:a.image_back},side:n.side,show:!0};e.push(i)},i=0;i<this.base_data.length;i++)n(i);e.forEach((function(e){"skeleton"===e.parent.type?e.parent.class=t.current_skeleton_points.filter((function(t){return parseInt(t.id)===parseInt(e.parent.point_id)}))[0].class:"part"===e.parent.type?e.parent.class=t.all_parts_points.filter((function(t){return parseInt(t.id)===parseInt(e.parent.point_id)}))[0].class:"product"===e.parent.type&&(e.parent.class=t.all_products_points.filter((function(t){return parseInt(t.id)===parseInt(e.parent.point_id)}))[0].class)})),this.selected_attachments=e},on_select_point:function(t){this.selected_point=t,this.step=2},on_drop_classes_list:function(){this.step=1},update_suitable_attachments:function(){for(var t=this,e={},s=this.all_products_points.filter((function(t){return"Minus"===t.type})),a=function(a){var n=t.all_products.filter((function(t){return parseInt(t.id)===parseInt(s[a].product_id)}))[0],i={attachment:{type:"product",id:n.id,point_id:s[a].id,name:n.name,class:s[a].class},image:{front:n.image_front,back:n.image_back},price:n.price,side:s[a].side,show:!0};e[s[a].class[0]]||(e[s[a].class[0]]=[]),e[s[a].class[0]].push(i)},n=0;n<s.length;n++)a(n);this.suitable_attachments=e},on_select_class:function(t){this.current_class=t,this.step=3},on_select_attachment:function(t){var e=this,s=this.suitable_attachments[this.current_class].filter((function(e){return parseInt(e.attachment.id)===parseInt(t.attachment.id)&&t.side!=e.side}))[0];s&&("skeleton"===t.parent.type?"front"===this.side?s.parent={type:"skeleton",class:this.selected_point.class,point_id:parseInt(this.current_skeleton_points.filter((function(t){return parseInt(t.related_id)===parseInt(e.selected_point.point_id)}))[0].id)}:"back"===this.side&&(s.parent={type:"skeleton",class:this.selected_point.class,point_id:parseInt(this.current_skeleton_points.filter((function(t){return parseInt(t.id)===parseInt(e.selected_point.point_id)}))[0].related_id)}):"product"===t.parent.type?"front"===this.side?s.parent={type:"product",class:this.selected_point.class,point_id:parseInt(this.all_products_points.filter((function(t){return parseInt(t.related_id)===parseInt(e.selected_point.point_id)}))[0].id)}:"back"===this.side&&(s.parent={type:"product",class:this.selected_point.class,point_id:parseInt(this.all_products_points.filter((function(t){return parseInt(t.id)===parseInt(e.selected_point.point_id)}))[0].related_id)}):"part"===t.parent.type&&("front"===this.side?s.parent={type:"part",class:this.selected_point.class,point_id:parseInt(this.all_parts_points.filter((function(t){return parseInt(t.related_id)===parseInt(e.selected_point.point_id)}))[0].id)}:"back"===this.side&&(s.parent={type:"part",class:this.selected_point.class,point_id:parseInt(this.all_parts_points.filter((function(t){return parseInt(t.id)===parseInt(e.selected_point.point_id)}))[0].related_id)})),this.update_selected_attachments(t),this.update_selected_attachments(s))},on_delete_attachment:function(t){var e=this,s=this.selected_attachments.filter((function(e){return parseInt(e.attachment.id)===parseInt(t.attachment.id)}));s.forEach((function(t){e.delete_attachment(t)}))},update_selected_attachments:function(t){this.delete_attachment(t),this.selected_attachments.push(t)},delete_attachment:function(t){for(var e=function(e){return t.parent.type===e.parent.type&&parseInt(t.parent.point_id)===parseInt(e.parent.point_id)&&t.side===e.side},s=0;s<this.selected_attachments.length;s++)e(this.selected_attachments[s])&&this.selected_attachments.splice(s,1);this.delete_child()},delete_child:function(){for(var t=this,e=function(e){"skeleton"!=t.selected_attachments[e].parent.type&&(t.selected_attachments_classes.map((function(s){return s.type===t.selected_attachments[e].parent.type&&parseInt(s.point_id)===parseInt(t.selected_attachments[e].parent.point_id)})).includes(!0)||t.delete_attachment(t.selected_attachments[e]))},s=0;s<this.selected_attachments.length;s++)e(s)},on_darken_parts:function(t){this.darken_parts=t},add_to_card:function(){for(var t=this.selected_attachments.filter((function(t){return"product"===t.attachment.type})),e=[],s=0;s<t.length;s++)e.includes(parseInt(t[s].attachment.id))||e.push(parseInt(t[s].attachment.id));this.$store.dispatch("add_to_card",e)}},computed:{classes:function(){return this.$store.getters.classes},all_skeletons:function(){return this.$store.getters.all_skeletons},all_parts:function(){return this.$store.getters.all_parts},all_products:function(){return this.$store.getters.all_products},all_parts_points:function(){return this.$store.getters.all_parts_points},all_products_points:function(){return this.$store.getters.all_products_points},kit_or_base_data:function(){return this.$store.getters.kit_or_base_data},current_skeleton_points:function(){return this.$store.getters.skeleton_points},current_skeleton_data:function(){var t=this;return this.all_skeletons.filter((function(e){return parseInt(e.id)===parseInt(t.kit_or_base_data.skeleton_id)}))[0]},base_data:function(){return this.$store.getters.base_data},kit_data:function(){return this.$store.getters.kit_data},selected_attachments_classes:function(){var t=this,e=[];return this.current_skeleton_points.filter((function(t){return"Plus"===t.type})).forEach((function(t){e.push({type:"skeleton",point_id:parseInt(t.id),side:t.side,class:t.class})})),this.selected_attachments.forEach((function(s){if("part"===s.attachment.type){var a=t.all_parts_points.filter((function(t){return parseInt(t.part_id)===parseInt(s.attachment.id)&&"Plus"===t.type&&t.side===s.side}))[0];a&&e.push({type:"part",point_id:parseInt(a.id),side:a.side,class:a.class})}else if("product"===s.attachment.type){var n=t.all_products_points.filter((function(t){return parseInt(t.product_id)===parseInt(s.attachment.id)&&"Plus"===t.type&&t.side===s.side}))[0];n&&e.push({type:"product",point_id:parseInt(n.id),side:n.side,class:n.class})}})),e},suitable_attachments_classes:function(){var t=this,e=[];if(Object.keys(this.selected_point).length>0)for(var s=function(s){var a=t.all_products_points.filter((function(e){return"Minus"===e.type&&e.class.includes(t.selected_point.class[s])}))[0],n=t.all_products.filter((function(t){return parseInt(t.id)===parseInt(a.product_id)}))[0];e.push({name:t.classes.filter((function(e){return parseInt(e.id)===parseInt(t.selected_point.class[s])}))[0].name,image:{front:n.image_front,back:n.image_back},class:parseInt(t.selected_point.class[s])})},a=0;a<this.selected_point.class.length;a++)s(a);return e},price:function(){var t=0;if(this.selected_attachments.length>0){for(var e=this.selected_attachments.filter((function(t){return"product"===t.attachment.type})),s=[],a=0;a<e.length;a++)s.includes(parseInt(e[a].attachment.id))||s.push(parseInt(e[a].attachment.id));this.all_products.forEach((function(e){s.includes(parseInt(e.id))&&(t+=e.price)}))}return t},weight:function(){var t=0;if(this.selected_attachments.length>0){for(var e=this.selected_attachments.filter((function(t){return"product"===t.attachment.type})),s=[],a=0;a<e.length;a++)s.includes(parseInt(e[a].attachment.id))||s.push(parseInt(e[a].attachment.id));this.all_products.forEach((function(e){s.includes(parseInt(e.id))&&(t+=e.weight)}))}return t}}},Q=Y,V=(s("b2d0"),Object(d["a"])(Q,a,n,!1,null,null,null));e["default"]=V.exports},9663:function(t,e,s){"use strict";var a=s("7a45"),n=s.n(a);n.a},ae80:function(t,e,s){},b2d0:function(t,e,s){"use strict";var a=s("d9a9"),n=s.n(a);n.a},c19f:function(t,e,s){"use strict";var a=s("c736"),n=s.n(a);n.a},c736:function(t,e,s){},d923:function(t,e,s){"use strict";var a=s("0421"),n=s.n(a);n.a},d9a9:function(t,e,s){}}]);
//# sourceMappingURL=chunk-f360e6a6.f5585870.js.map